<!DOCTYPE html>
<html style="font-size: 16px;" lang="en"><head>
  <style>
    /* Style for the post container */
    .post-container {
      display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
    }
  
    /* Style for individual posts */
    .u-blog-post {
      width: 100%; /* Adjust the width as needed */
      margin: 20px; /* Add margin for spacing between posts */
    }
  
    .u-blog-control {
      text-align: center; /* Center the post content */
    }
    .u-image {
  width: 500px; /* Set your desired width */
  height: auto; /* This maintains the aspect ratio */
  margin-top: 30px;
  margin-bottom: 30px;
  margin-left: 200px;
}
.u-section-1 {
  margin-bottom: 40px; /* Adjust the margin value as needed */
}
.u-fecha-padding {
  padding: 10px 20px;
}

.u-title-padding{
  padding: 20px;
}

  </style>
  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="AgroReviews">
    <meta name="description" content="">
    <title>Perfil</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
<link rel="stylesheet" href="Perfil.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 5.20.7, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Perfil">
    <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/"></head>
  <body data-path-to-root="./" data-include-products="true" class="u-body u-xl-mode" data-lang="en"><header class="u-clearfix u-grey-10 u-header u-sticky u-sticky-614f u-header" id="sec-e39e"><div class="u-clearfix u-sheet u-sheet-1">
        <h1 class="u-custom-font u-font-montserrat u-text u-text-1">AgroReviews</h1>
        <nav class="u-align-left u-font-size-14 u-menu u-menu-hamburger u-nav-spacing-25 u-offcanvas u-menu-1" data-responsive-from="XL">
          <div class="menu-collapse">
            <a class="u-button-style u-nav-link" href="#" style="padding: 4px 0px; font-size: calc(1em + 8px);">
              <svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 302 302" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-7b92"></use></svg>
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="svg-7b92" x="0px" y="0px" viewBox="0 0 302 302" style="enable-background:new 0 0 302 302;" xml:space="preserve" class="u-svg-content"><g><rect y="36" width="302" height="30"></rect><rect y="236" width="302" height="30"></rect><rect y="136" width="302" height="30"></rect>
</g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
            </a>
          </div>
          <div class="u-custom-menu u-nav-container">
            <ul class="u-nav u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="index.html#AboutUs" style="padding: 10px 20px;">Inicio</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="index.html" style="padding: 10px 20px;">Sube un producto</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="Perfil.html" style="padding: 10px 20px;">Mi perfil</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="index.html#AboutUs" style="padding: 10px 20px;">Acerca de nosotros</a>
</li></ul>
          </div>
          <div class="u-custom-menu u-nav-container-collapse">
            <div class="u-align-center u-border-2 u-border-grey-75 u-container-style u-custom-color-1 u-inner-container-layout u-sidenav">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close u-menu-close-1"></div>
                <ul class="u-align-left u-custom-font u-font-montserrat u-nav u-popupmenu-items u-unstyled u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="index.html#AboutUs">Inicio</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="index.html">Sube un producto</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Perfil.html">Mi perfil</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="index.html#AboutUs">Acerca de nosotros</a>
</li></ul>
              </div>
            </div>
            <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
          </div>
        </nav>
        <form action="#" method="get" class="u-border-2 u-border-black u-expanded-width-xs u-radius-12 u-search u-search-left u-white u-search-1">
          <button class="u-search-button" type="submit">
            <span class="u-search-icon u-spacing-10">
              <svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 56.966 56.966"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-a58f"></use></svg>
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="svg-a58f" x="0px" y="0px" viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve" class="u-svg-content"><path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"></path></svg>
            </span>
          </button>
          <input class="u-custom-font u-font-montserrat u-search-input" type="search" name="search" value="" placeholder="Search">
        </form>
      </div></header>
    <section class="u-clearfix u-section-1" id="sec-1f9e">
      <div class="u-clearfix u-sheet u-valign-bottom u-sheet-1">
        <div class="u-image u-image-circle u-image-1" alt="" data-image-width="1080" data-image-height="1065"></div>
        <p class="u-align-center u-custom-font u-font-montserrat u-large-text u-text u-text-variant u-text-1">Nombre</p>
        <div class="u-expanded-width u-tab-links-align-center u-tabs u-tabs-1">
          <ul class="u-grey-10 u-tab-list u-unstyled u-tab-list-1" role="tablist">
            <li class="u-tab-item" role="presentation">
              <a class="active u-border-2 u-border-active-black u-border-no-left u-border-no-right u-border-no-top u-button-style u-custom-font u-font-montserrat u-radius-10 u-tab-link u-tab-link-1" id="link-tab-8e23" href="#tab-8e23" role="tab" aria-controls="tab-8e23" aria-selected="true">Publicaciones</a>
            </li>
            <li class="u-tab-item" role="presentation">
              <a class="u-border-2 u-border-active-black u-border-no-left u-border-no-right u-border-no-top u-button-style u-custom-font u-font-montserrat u-radius-10 u-tab-link u-tab-link-2" id="link-tab-0257" href="#tab-0257" role="tab" aria-controls="tab-0257" aria-selected="false">Estadisticas</a>
            </li>
          </ul>
          <div class="u-tab-content">
            <div class="u-align-center u-container-style u-tab-active u-tab-pane u-tab-pane-1" id="tab-8e23" role="tabpanel" aria-labelledby="link-tab-8e23">
              <section class="u-clearfix" id="post-section">
                <div class="post-container center-post center">
                  <ul id="post-list" class="u-blog u-expanded-width u-blog-1">
                    <!-- Posts will be added dynamically here -->
                  </ul>
                </div>
              </section>
            </div>
            <div class="u-align-left u-container-style u-tab-pane u-tab-pane-2" id="tab-0257" role="tabpanel" aria-labelledby="link-tab-0257">
              <div class="u-container-layout u-container-layout-3">
                <div class="u-clearfix u-custom-color-1 u-custom-html u-expanded-width u-custom-html-2"><!--Load the AJAX API-->
                  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
                  <script type="text/javascript"> // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart']});
      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawChart);
      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {
        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Producto');
        data.addColumn('number', 'Comision');
        data.addRows([
          ['Tractor John Deere 7230j 2017', 200000],
          ['Sustrato universal floragard 70 l', 40000],
          ['Cultivador Metalico', 3250],
        ]);
        // Set chart options
        var options = {'title':'Comisiones AgroReviews',
                       'width':400,
                       'height':300};
        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      } </script><!--Div that will hold the pie chart-->
                  <div id="chart_div"></div>
                </div>
                <div class="custom-expanded u-clearfix u-custom-html u-custom-html-3">
                  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
                  <script type="text/javascript"> // Load the Visualization API and the corechart package.
google.charts.load('current', {'packages':['corechart']});
// Set a callback to run when the Google Visualization API is loaded.
google.charts.setOnLoadCallback(drawChart);
// Callback that creates and populates a data table,
// instantiates the pie chart, passes in the data and
// draws it.
function drawChart() {
  // Create the data table.
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'Producto');
  data.addColumn('number', 'Comision');
  data.addRows([
    ['Tractor John Deere 7230j 2017', 200000],
    ['Sustrato universal floragard 70 l', 40000],
    ['Cultivador Metalico', 3250],
  ]);
  // Calculate total profits
  var totalProfits = 0;
  for (var i = 0; i < data.getNumberOfRows(); i++) {
    totalProfits += data.getValue(i, 1);
  }
  // Create a div to hold the total profits label
  var totalProfitsLabel = document.createElement('div');
  totalProfitsLabel.id = 'total_profits_label';
  totalProfitsLabel.style.position = 'absolute';
  totalProfitsLabel.style.right = '10px';
  totalProfitsLabel.style.bottom = '10px';
  totalProfitsLabel.innerHTML = 'Ganancias Totales: ' + totalProfits + '₡';
  // Add the total profits label to the chart div
  document.getElementById('chart_div').appendChild(totalProfitsLabel);
  // Set chart options
  var options = {'title':'Comisiones AgroReviews',
                 'width':761,
                 'height':800,
                 'backgroundColor':'transparent'};
  // Instantiate and draw our chart, passing in some options.
  var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
  chart.draw(data, options);
} </script>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="AboutUs"><div class="u-clearfix u-sheet u-sheet-1">
      <h4 id= "AboutUs"class="u-align-left u-custom-font u-font-montserrat u-text u-text-1">Acerca de nosotros</h4>
      <p class="u-align-left u-custom-font u-font-montserrat u-small-text u-text u-text-variant u-text-2"> Somos una plataforma en línea dedicada a la venta de elementos y suministros relacionados con la agricultura, al mismo tiempo que ofrece oportunidades de empleo para personas que desean trabajar en áreas vinculadas a la agricultura sin necesidad de laborar en el campo. En esta página, los usuarios pueden encontrar una amplia gama de productos agrícolas, desde herramientas y maquinaria especializada hasta semillas y fertilizantes de alta calidad.</p>
    </div></footer>
  <section class="u-backlink u-clearfix u-grey-80">
    <script>
      class BlogPost {
        constructor(rating, allRatings, id, date, description, price, product, imageURL, reviews, user) {
            this.rating = rating;
            this.allRatings = allRatings;
            this.id = id;
            this.date = date;
            this.description = description;
            this.price = price;
            this.product = product;
            this.imageURL = imageURL;
            this.reviews = reviews;
            this.user = user;
          }
    
        addReview(review) {
          this.reviews.push(review);
        }
    
        getAverageRating() {
          if (this.reviews.length === 0) {
            return 0;
          }
    
          const totalRating = this.reviews.reduce((sum, review) => sum + review.rating, 0);
          return totalRating / this.reviews.length;
        }
      }
    
      class Review {
        constructor(user, rating, comment) {
          this.user = user;
          this.rating = rating;
          this.comment = comment;
        }
      }

      const blogPosts = [];
      //<!--!==================================================================================fetch
        // Realizar una solicitud GET usando fetch
        fetch(`http://localhost:8080/user/4444`)//${userID}`)
          .then(response => {
            // Verificar si la solicitud fue exitosa (código de estado 200)
            if (!response.ok) {
              throw new Error('La solicitud no fue exitosa');
            }
            // Parsear la respuesta a JSON
            return response.json();
          })
          .then(data => {
            // Trabajar con el objeto JSON recibido
            data.posts.forEach(postData => {
              let reviews = [];
              postData.reviews.forEach(reviewData => {
                const user = reviewData.user ? new User(reviewData.user.type, reviewData.user.name, reviewData.user.id, reviewData.user.userRating, reviewData.user.wallet) : null;
                const review = new Review(user, reviewData.rating, reviewData.comment);
                reviews.push(review);
              });

              const product = new Product(postData.product.name, postData.product.price, postData.product.type, postData.product.condition);

              const user = postData.user ? new User(postData.user.type, postData.user.name, postData.user.id, postData.user.userRating, postData.user.wallet) : null;

              const post = new BlogPost(postData.rating, postData.allRatings, postData.id, postData.date, postData.description, postData.price, product, postData.imageURL, reviews, user);
              blogPosts.push(post);
            });            
            console.log('Objeto JSON recibido:', data);
            displayPosts();
          })
          .catch(error => {
            // Manejar errores de la solicitud
            console.error('Se produjo un error:', error);
          });

        //==================================================================================fetch    
      // Modify the displayPosts function to clear the existing list and add all posts
      function displayPosts() {
        const postList = document.getElementById('post-list');
        // Clear the existing list
        postList.innerHTML = '';

        blogPosts.forEach((post) => {
          const listItem = document.createElement('li');
          listItem.classList.add('u-repeater-item'); // Add the repeater item class

          // Create a link for each post with a unique identifier in the URL
          const postLink = document.createElement('a');
          postLink.href = `post.html?postID=${generateUniqueID(post)}`;

          postLink.innerHTML = `
            <div class="u-blog-post u-container-style u-custom-color-1 u-radius-10 u-repeater-item u-shape-round">
              <div class="u-container-layout u-similar-container u-container-layout-1">
                <a class="u-post-header-link u-title-padding" href="${post.product.name}.html">
                </a>
                <img alt="" class="custom-expanded u-blog-control u-image u-image-round u-radius-10" src="${post.imageURL}">

                <h4 class="u-blog-control u-text u-text-1">${post.product.name}</h4>
                <div class="u-blog-control u-metadata u-metadata-1">
                  <span class="u-meta-author u-meta-icon u-fecha-padding">${(post.date)}</span>
                </div>
                <div class="style u-clearfix u-custom-html u-custom-html-1">
                  <meta charset="UTF-8">
                  <link rel="stylesheet" type="text/css" href="style.css">
                  <title></title>
                </div>
              </div>
            </div>
          `;

        listItem.appendChild(postLink);
        postList.appendChild(listItem);
        });
        }
      // Add an event listener to execute the function once the page is loaded
      window.addEventListener('load', displayPosts);
    </script>
</body></html>